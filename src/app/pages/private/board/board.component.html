<div class="flex h-screen w-screen flex-col">
  <app-board-header></app-board-header>

  <main
    class="bg-board-surface flex max-h-[calc(100vh-var(--spacing-header-size))] flex-1 overflow-x-auto overflow-y-hidden py-4"
    style="
      scrollbar-color: oklch(76.68% 0 0/50%) oklch(22.98% 0.0107 260.68 / 20%);
    "
  >
    <div
      cdkDropListGroup
      cdkDropList
      cdkDropListOrientation="horizontal"
      class="flex gap-2"
      (cdkDropListDropped)="drop($event)"
    >
      @for (column of columns; track column.id) {
        <div cdkDrag>
          <div class="drag-column-placeholder" *cdkDragPlaceholder></div>
          <app-board-column
            [title]="column.title"
            cdkDropList
            [cdkDropListData]="column.tasks"
            (cdkDropListDropped)="dropCard($event)"
          >
            @for (task of column.tasks; track task.id) {
              <div cdkDrag>
                <div class="drag-card-placeholder" *cdkDragPlaceholder></div>
                <app-card-task [taskData]="task"></app-card-task>
              </div>
            }
          </app-board-column>
        </div>
      }
    </div>

    @if (showInput()) {
      <div
        #newTaskContainer
        class="h-fit w-board-column rounded-column bg-column-background p-2"
      >
        <input-component
          id="#newTaskInput"
          placeholder="Insira um tÃ­tulo"
        ></input-component>
        <button-component [onClick]="addNewList">
          <span>Add list</span>
        </button-component>
      </div>
    } @else {
      <button-component
        [onClick]="enableInput"
        variant="outline"
        class="w-board-column justify-start"
      >
        <icon-plus></icon-plus>
        <span>Add new list</span>
      </button-component>
    }
  </main>
</div>
